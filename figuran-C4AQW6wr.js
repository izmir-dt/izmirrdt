import{c as w,r as n,a as v,j as e,S as z}from"./index-BiS_08CB.js";import{p as E,b as R,c as T}from"./theater-BlRsLV9p.js";import{S as k}from"./skeleton-CIwMLOW5.js";import{I as K}from"./input-D4NQlLM0.js";import{B as A}from"./button-DjGbwvRU.js";import{P as D}from"./page-header-DYGn4VLB.js";import{E as G}from"./excel-dialog-BPx1tPwP.js";import{U as y}from"./users-B7ucXcX7.js";import{D as U}from"./download-DUYADPWz.js";import"./copy-dkgLgat7.js";const P=w("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);const q=w("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);function I({value:a}){const l=a.split(",").map(s=>s.trim()).filter(Boolean);return l.length===0?e.jsx("span",{className:"text-xs text-muted-foreground/40 italic",children:"—"}):e.jsx("div",{className:"flex flex-wrap gap-1",children:l.map(s=>e.jsx("span",{className:"inline-block bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 px-1.5 py-0.5 rounded text-[10px] font-medium",children:s},s))})}function Y({value:a}){const l=a.split(",").map(s=>s.trim()).filter(Boolean);return l.length<=1?e.jsx("span",{className:"text-xs text-foreground",children:a}):e.jsx("div",{className:"flex flex-wrap gap-x-1 gap-y-0.5",children:l.map((s,d)=>e.jsxs("span",{className:"flex items-center gap-0.5 text-xs",children:[d>0&&e.jsx("span",{className:"text-muted-foreground/40 font-bold select-none",children:"•"}),e.jsx("span",{children:s})]},d))})}function te(){const[a,l]=n.useState(""),[s,d]=n.useState("liste"),[L,j]=n.useState(!1),{data:m,isLoading:M}=v({queryKey:["/api/sheets","FİGÜRAN LİSTESİ"],refetchOnMount:"always"}),{data:u,isLoading:C}=v({queryKey:["/api/sheets","BÜTÜN OYUNLAR"],refetchOnMount:"always"}),S=M||C,f=n.useMemo(()=>u?E(u.headers,u.rows).filter(t=>R(t.kategori)):[],[u]),g=n.useMemo(()=>m?m.rows:[],[m]),i=n.useMemo(()=>{if(!a.trim())return g;const t=a.toLowerCase();return g.filter(r=>r.some(x=>String(x??"").toLowerCase().includes(t)))},[g,a]),c=n.useMemo(()=>{if(!a.trim())return f;const t=a.toLowerCase();return f.filter(r=>r.kisi.toLowerCase().includes(t)||r.oyun.toLowerCase().includes(t)||r.gorev.toLowerCase().includes(t))},[f,a]);if(S)return e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx(k,{className:"h-10 w-64 rounded-lg"}),[1,2,3,4,5,6].map(t=>e.jsx(k,{className:"h-12 rounded-xl"},t))]});const p=m?.headers||[],F=()=>{const t=p.join("	"),r=i.map(x=>p.map((b,o)=>String(x[o]??"")).join("	"));return[t,...r].join(`
`)};return e.jsxs("div",{className:"p-6 space-y-4 max-w-7xl",children:[e.jsx(D,{icon:y,title:"Figüranlar",description:"Figüran listesi ve oyunlardaki figüran görevleri"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex rounded-xl overflow-hidden border border-border",children:[e.jsxs("button",{"data-testid":"tab-liste",onClick:()=>d("liste"),className:"flex items-center gap-1.5 px-4 py-2 text-xs font-semibold transition-colors",style:s==="liste"?{background:"hsl(var(--sidebar))",color:"hsl(var(--sidebar-primary))"}:{background:"transparent",color:"hsl(var(--muted-foreground))"},children:[e.jsx(q,{className:"w-3.5 h-3.5"}),"FİGÜRAN LİSTESİ (",i.length,")"]}),e.jsxs("button",{"data-testid":"tab-oyunlar",onClick:()=>d("oyunlar"),className:"flex items-center gap-1.5 px-4 py-2 text-xs font-semibold transition-colors border-l border-border",style:s==="oyunlar"?{background:"hsl(var(--sidebar))",color:"hsl(var(--sidebar-primary))"}:{background:"transparent",color:"hsl(var(--muted-foreground))"},children:[e.jsx(P,{className:"w-3.5 h-3.5"}),"OYUN BAZLI (",c.length,")"]})]}),e.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-xs",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(K,{"data-testid":"input-search-figuran",placeholder:"Figüran, oyun ara...",value:a,onChange:t=>l(t.target.value),className:"pl-9"})]}),e.jsxs(A,{variant:"outline",size:"sm",className:"gap-1.5",onClick:()=>j(!0),"data-testid":"button-excel-figuran",children:[e.jsx(U,{className:"w-3.5 h-3.5"}),"Excel'e Kopyala"]})]}),s==="liste"?e.jsx("div",{className:"bg-card border border-card-border rounded-xl overflow-hidden",children:i.length===0?e.jsxs("div",{className:"py-16 text-center text-muted-foreground",children:[e.jsx(y,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"Kayıt bulunamadı"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted/60 border-b border-border",children:p.map((t,r)=>e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-muted-foreground whitespace-nowrap",children:t},r))})}),e.jsx("tbody",{children:i.map((t,r)=>e.jsx("tr",{className:"border-t border-border/50 hover:bg-muted/20",children:p.map((x,b)=>{const o=String(t[b]??""),h=x.toLowerCase(),N=h.includes("oyun"),O=h.includes("görev")&&!N,B=h.includes("sıra")||h.includes("no");return e.jsx("td",{className:"px-4 py-2.5",children:B?e.jsx("span",{className:"text-xs text-muted-foreground tabular-nums",children:o}):N?e.jsx(I,{value:o}):O?e.jsx(Y,{value:o}):e.jsx("span",{className:"text-sm font-medium text-foreground",children:o})},b)})},r))})]})})}):e.jsx("div",{className:"bg-card border border-card-border rounded-xl overflow-hidden",children:c.length===0?e.jsxs("div",{className:"py-16 text-center text-muted-foreground",children:[e.jsx(y,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"Figüran kaydı bulunamadı"}),e.jsx("p",{className:"text-xs mt-1 opacity-60",children:"BÜTÜN OYUNLAR sayfasına figüran kategorisiyle eklediğinizde burada görünür"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/60 border-b border-border",children:[e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-muted-foreground w-8",children:"#"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-muted-foreground",children:"Oyun"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-muted-foreground",children:"Kişi"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-muted-foreground",children:"Görev"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-muted-foreground",children:"Kategori"})]})}),e.jsx("tbody",{children:c.map((t,r)=>e.jsxs("tr",{className:"border-t border-border/50 hover:bg-muted/20",children:[e.jsx("td",{className:"px-4 py-2.5 text-xs text-muted-foreground tabular-nums",children:r+1}),e.jsx("td",{className:"px-4 py-2.5 max-w-[220px]",children:e.jsx("span",{className:"inline-block bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 px-2 py-0.5 rounded text-[11px] font-medium leading-tight",children:t.oyun})}),e.jsx("td",{className:"px-4 py-2.5 font-medium text-foreground text-sm",children:t.kisi}),e.jsx("td",{className:"px-4 py-2.5 text-xs text-muted-foreground",children:t.gorev}),e.jsx("td",{className:"px-4 py-2.5 text-xs",children:e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-medium whitespace-nowrap ${T(t.kategori)}`,children:t.kategori})})]},r))})]})})}),e.jsx(G,{open:L,onClose:()=>j(!1),playName:s==="liste"?`Figüran Listesi (${i.length} kişi)`:`Figüranlar Oyun Bazlı (${c.length} kayıt)`,rows:s==="oyunlar"?c:[],customTsvFn:s==="liste"?F:void 0})]})}export{te as default};
